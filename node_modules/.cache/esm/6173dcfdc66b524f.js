let express,morgan,cors,bodyParser,studentsRouter,teachersRouter,authRouter,path,dirname,fileURLToPath,AppError,errorHandler;_c66‍.x([["default",()=>_c66‍.o]]);_c66‍.w("express",[["default",["express"],function(v){express=v}]]);_c66‍.w("morgan",[["default",["morgan"],function(v){morgan=v}]]);_c66‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_c66‍.w("body-parser",[["default",["bodyParser"],function(v){bodyParser=v}]]);_c66‍.w("./routes/studentRoutes.js",[["default",["studentsRouter"],function(v){studentsRouter=v}]]);_c66‍.w("./routes/teacherRoutes.js",[["default",["teachersRouter"],function(v){teachersRouter=v}]]);_c66‍.w("./routes/authRouter.js",[["default",["authRouter"],function(v){authRouter=v}]]);_c66‍.w("path",[["default",["path"],function(v){path=v}],["dirname",["dirname"],function(v){dirname=v}]]);_c66‍.w("url",[["fileURLToPath",["fileURLToPath"],function(v){fileURLToPath=v}]]);_c66‍.w("./uitils/appError.js",[["default",["AppError"],function(v){AppError=v}]]);_c66‍.w("./controllers/errorHandler.js",[["default",["errorHandler"],function(v){errorHandler=v}]]);











const __dirname = dirname(dirname(fileURLToPath(_c66‍._.meta.url)))

const app = express();



app.use((req, res, next) => {
  console.log("Hello from Middleware");
 // console.log(req.headers);
  next();
});



app.use(cors());
app.use(morgan("dev"));
app.use(express.static(path.join(__dirname + "/public")))
app.use(bodyParser.json());
app.use(bodyParser.urlencoded());


app.get("/", (req,res) => {
  res.status(200).json({
    "status": "ok",
    "message": "Hello"
  })
})


app.use("/api/v1/students", studentsRouter)
app.use("/api/v1/teachers", teachersRouter)
app.use("/api/v1/auth", authRouter)

//handle 404 error
app.get("*", (req, res, next) => {
  
 next(new AppError(`cannot find ${req.originalUrl} on the server`))
}) 
 


app.use(errorHandler)

_c66‍.d(app);



